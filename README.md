# oray

## 花生壳 一个动态域名解析软件，支持端口映射和内网穿透
- 壳域名
- 以颠覆式的NAT-DDNS创新技术、全新的交互界面及功能体验，搭配Web、微信远程管理
- 无需公网IP，无需路由器端口映射，从此对nat说NO！颠覆式的动态域名技术创新，全新的交互界面及功能体验

### 路由器上网方式
- 拨号上网：填写宽带帐号和密码，连入宽带商服务器后才可以上网，即ADSL拨号、PPPoE拨号等
- 自动获取ip
- 固定ip：一般用在企业单位的专线宽带业务
- 这样的运营商内网IP是外网不可达的（即使用动态域名也不起作用）。而企业由于业务需要，比如虚拟局域网组网、办公OA系统、ERP系统等，都需要有公网IP才可以实现。
    - 公网IP的解决，目前主要有三种方案：申请固定IP专线，云方案，云主机+内网穿透方案

### 云方案，云主机+内网穿透方案 https://hsk.oray.com/news/7849.html
- 通过云主机做跳板来实现内网穿透，既可以复用现有的业务系统，又解决了公网IP的问
    - 1.搭建虚拟局域网 wsg网络行为管理路由器， openvpn
    - 2.网穿透的防火墙规则 iptables 直接访问云主机的对应端口就可以穿透到内网。该方案是由iptables做数据包转发，不需要保持连接做反向代理，稳定性和速度都比frp之类的反向代理要好的多
    - 3.花生壳，花生棒pro（免费内网穿透及端口映射）

### NAT网络地址转换  
- 端口映射是NAT的一种，功能是把在公网的地址转翻译成私有地址， 采用路由方式的ADSL宽带路由器拥有一个动态或固定的公网IP，ADSL直接接在HUB或交换机上，所有的电脑共享上网。还有一种名词是端口转发，关于二者的区别，您了解多少呢？
    - 即：虚拟服务器，域名+路由器配置虚拟服务器
    - 动态端口映射，内网连接互联网
    - 静态端口映射，内网提供服务
- 端口转发（Port forwarding），有时被叫做隧道，是安全壳（SSH） 为网络安全通信使用的一种方法。端口转发是转发一个网络端口从一个网络节点到另一个网络节点的行为，其使一个外部用户从外部经过一个被激活的NAT路由器到达一个在私有内部IP地址（局域网内部）上的一个端口。

### Upnp
- 让程序自动开启网关上的端口映射。并且组织其他程序再开启这个端口的映射
- 路由器的upnp服务存在很大的漏洞，通过upnp漏洞可以被很轻松的远程控制，如果用户暂时用不上upnp功能，就先将其关闭吧

### DMZ主机
- DMZ主机，实际上就是把内网中的一台主机暴露在外网，直接使用公网IP，这样可以和外网一样，也就不需要启用UPNP了。
- 内网有一台共享资源的服务器，为外网用户提供资源，您可以设置DMZ主机将该服务器开放给外网
    - 如果服务器的服务端口固定且易于设置，建议使用虚拟服务器功能，做端口映射，还不限于一台服务器
- 一般来说，路由器只允许内网中的一台主机启用DMZ
- 路由器WAN口IP地址如果不固定，在使用DMZ主机的时候，最好启动DDNS功能
- 为了解决安装防火墙后外部网络不能访问内部网络服务器的问题，而设立的一个非安全系统与安全系统之间的缓冲区，这个缓冲区位于企业内部网络和外部网络之间的小网络区域内，在这个小网络区域内可以放置一些必须公开的服务器设施，如企业Web服务器、FTP服务器和论坛等

### 内网穿透   https://blog.csdn.net/jake_tian/article/details/99962157
- 工具：ngrok，netapp.cn，小米球，Spike，frp，fcn，花生壳，Lanproxy，Ssh和autossh，echosite，Sunny-Ngrok
- 域名相当于公网ip+运营商服务器随机开放的端口号，端口映射，域名绑定

`
内网穿透简单来说就是将内网外网通过natapp隧道打通,让内网的数据让外网可以获取。
比如常用的办公室软件等，一般在办公室或家里，通过拨号上网，这样办公软件只有在本地的局域网之内才能访问，那么问题来了，
如果是手机上，或者公司外地的办公人员，如何访问到办公软件呢？这就需要natapp内网穿透工具了。
运行natapp隧道之后，natapp会分配一个专属域名/端口,办公软件就已经在公网上了,在外地的办公人员可以在任何地方愉快的访问办公软件了~~

内网穿透可以做什么?
    上文举例的办公软件
    放在家里的树莓派,服务器等,需要远程ssh管理,这样打通服务器的22端口即可远程通过ssh操作服务器了.
    微信/支付宝等本地开发.现在微信/支付宝等应用,需要服务器接收微信/支付宝发送的回调信息,然而在本地开发程序的话,还得实时上传到服务器,以便支持微信/支付宝的回调信息,如果使用了natapp内网穿透软件,将回调地址设置成natapp提供的地址,回调数据立即传递回本地,,这样很方便的在本地就可以实时调试程序,无须再不断上传服务器等繁琐且无意义的步骤.
    一些企业内部数据库,由于安全等原因,不愿意放到云服务器上,可以将数据库放到办公室本地,然后通过natapp的tcp隧道映射,这样既保证安全,又保证公网可以正常访问.
    一些开发板做的监控等信息,每台设备运行一条隧道,可以方便的管理监控各个设备的运行情况.
    一些本地运行的游戏,想和好基友一起联网玩,一条命令运行natapp即可实现联网游戏.
    群辉上运行natapp之后,随时随地在任何地方可以访问到群辉上应用
`

    - 体验版内网穿透，每月自动清除无流量映射
    - 当前的花生壳版本不支持使用UDP映射、密码访问限制、socks5密码功能，请升级使用花生壳客户端5.1及以上版本
    - 增加映射：
        - tcp：用于准确性要求高的数据传输，如文件传输、远程访问等，不支持创建网站或在浏览器访问

- 场景映射：按需开通场景映射，不占用映射数，支持升级带宽。与内网穿透映射共享花生壳流量
- UDP映射：开启后可映射无连接和高效率的UDP协议应用
- HTTP映射：开启后可映射支持Web访问的HTTP协议应用
- HTTPS加密映射：自动化部署HTTPS证书以加密访问HTTP协议应用
- 带宽，带宽，转换为下载速度一般为带宽的1/8
    - 100M宽带，百兆光纤是指接入的速率是100M，100M是指的是100Mbps（megabits per second 兆比特每秒），单位是bits
    - 路由器300m：无线路由器的无线最高速率，1Mbps理论上等于128KB/S。 300Mbps的传输速率，每秒钟的传输速度就是37.5MB/s
    - 1M = 1024 * 1024，8bit=1byte，1Mbps=1024Kb/s÷8=128KB/s、300Mbps÷8=37.5MB/s
    
### DDNS https://www.192ly.com/router-settings/mercury/mr-ddns-sz.html?TPWlanWarnChecked=0
- 设置一个域名绑定到路由器动态ip上，必须有公网ip和开放的端口
- 一般搭配端口映射使用
`通过DDNS服务，可以将固定的域名和接入Internet的公网IP进行绑定，使得外网主机和路由器进行通信时，可直接使用域名进行访问。
 服务提供商
 本路由器的DDNS服务提供商为花生壳（www.oray.com）。
 用户名/密码
 在DDNS服务器地址上注册的用户名/密码。
 连接状态
 与DDNS服务器的连接状态。
 服务类型
 当前DDNS的服务类型。
 域名信息
 从DDNS服务器获得的域名服务列表。
 注意：在登录之前，您首先需要到DDNS服务提供商处申请一个DDNS的账号。
 `
### 访客网络
- 提供一个专门的无线网络供访客使用，可以实现对访客和内网的安全隔离，从而有效保障内网数据安全
### 无线桥接
- 主从路由器


### 软路由

